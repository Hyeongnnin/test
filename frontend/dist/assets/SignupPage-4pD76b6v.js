import{d as E,r as i,D as O,c as d,b as t,g as b,n as p,z as q,A as k,B as j,t as c,E as V,h as u}from"./index-DamHdx69.js";import{s as _}from"./api-DXNNeTpL.js";const B={class:"min-h-screen flex items-center justify-center bg-gray-50 pt-16"},T={class:"w-full max-w-lg px-4"},A={class:"bg-white shadow-lg rounded-2xl border border-gray-100 p-8 space-y-6"},D={class:"flex rounded-full border border-gray-200 bg-gray-50 p-1 text-sm"},I={key:0,class:"mt-1 text-sm text-red-600"},N={key:0,class:"mt-1 text-sm text-red-600"},U={key:0,class:"mt-1 text-sm text-red-600"},z=["disabled"],M={key:0},F={key:1},J={class:"pt-2 text-sm text-gray-600"},H=E({__name:"SignupPage",emits:["navigate"],setup(K,{emit:P}){const m=i("individual"),g=i(""),v=i(""),y=i(""),f=i(!1),o=i(""),x=i("success"),n=O({});function $(){Object.keys(n).forEach(l=>{delete n[l]})}function w(l){delete n[l],o.value=""}async function C(){var l;f.value=!0,o.value="",x.value="error",$();try{await _(g.value,v.value,y.value),x.value="success",o.value="가입이 완료되었습니다. 이제 로그인할 수 있어요."}catch(e){if(!(e!=null&&e.response)){console.error("Signup request failed (no response)",e),o.value="서버에 연결할 수 없습니다. 네트워크 또는 CORS 설정을 확인해주세요.";return}const s=(l=e==null?void 0:e.response)==null?void 0:l.data;if(s!=null&&s.detail)o.value=s.detail;else if(s&&typeof s=="object"){for(const[r,a]of Object.entries(s))Array.isArray(a)?n[r]=a.map(String):typeof a=="string"?n[r]=[a]:a&&typeof a=="object"&&(n[r]=[JSON.stringify(a)]);const S=[];Object.values(n).forEach(r=>S.push(...r)),o.value=S.join(" ")||"입력하신 정보를 다시 확인해주세요.",await V();const h=Object.keys(n)[0];if(h){const r=document.querySelector(`[data-field="${h}"]`);r==null||r.focus()}}else o.value="가입 중 오류가 발생했습니다. 입력하신 정보를 다시 확인해주세요."}finally{f.value=!1}}return(l,e)=>(u(),d("div",B,[t("div",T,[t("div",A,[e[12]||(e[12]=t("div",null,[t("h2",{class:"text-2xl font-semibold text-gray-900 mb-2"},"회원가입"),t("p",{class:"text-sm text-gray-500"}," 아래에서 회원 유형을 선택한 뒤, 기본 정보를 입력해주세요. ")],-1)),t("div",D,[t("button",{type:"button",class:p(["flex-1 py-2 rounded-full transition-colors",m.value==="individual"?"bg-white text-brand-600 shadow-sm":"text-gray-500"]),onClick:e[0]||(e[0]=s=>m.value="individual")}," 개인회원 ",2),t("button",{type:"button",class:p(["flex-1 py-2 rounded-full transition-colors",m.value==="expert"?"bg-white text-brand-600 shadow-sm":"text-gray-500"]),onClick:e[1]||(e[1]=s=>m.value="expert")}," 전문가 회원 ",2)]),t("form",{onSubmit:q(C,["prevent"]),class:"space-y-4"},[t("div",null,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"아이디",-1)),k(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>g.value=s),"data-field":"username",type:"text",required:"",class:p(["w-full px-3 py-2 rounded-lg text-sm focus:outline-none",n.username?"border-red-600 ring-2 ring-red-100 outline-none":"border border-gray-300 focus:ring-2 focus:ring-brand-500 focus:border-brand-500"]),onInput:e[3]||(e[3]=s=>w("username")),placeholder:"사용하실 아이디를 입력하세요"},null,34),[[j,g.value]]),n.username?(u(),d("p",I,c(n.username.join(" ")),1)):b("",!0)]),t("div",null,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"이메일",-1)),k(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>v.value=s),"data-field":"email",type:"email",required:"",class:p(["w-full px-3 py-2 rounded-lg text-sm focus:outline-none",n.email?"border-red-600 ring-2 ring-red-100 outline-none":"border border-gray-300 focus:ring-2 focus:ring-brand-500 focus:border-brand-500"]),onInput:e[5]||(e[5]=s=>w("email")),placeholder:"example@email.com"},null,34),[[j,v.value]]),n.email?(u(),d("p",N,c(n.email.join(" ")),1)):b("",!0)]),t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"비밀번호",-1)),k(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>y.value=s),"data-field":"password",type:"password",required:"",class:p(["w-full px-3 py-2 rounded-lg text-sm focus:outline-none",n.password?"border-red-600 ring-2 ring-red-100 outline-none":"border border-gray-300 focus:ring-2 focus:ring-brand-500 focus:border-brand-500"]),onInput:e[7]||(e[7]=s=>w("password")),placeholder:"8자 이상, 영문/숫자/기호 조합"},null,34),[[j,y.value]]),n.password?(u(),d("p",U,c(n.password.join(" ")),1)):b("",!0)]),t("button",{type:"submit",class:"w-full inline-flex justify-center items-center px-4 py-2.5 rounded-lg bg-brand-600 text-white text-sm font-medium hover:bg-brand-700 disabled:opacity-60",disabled:f.value},[f.value?(u(),d("span",F,"가입 처리 중...")):(u(),d("span",M,"가입하기"))],8,z)],32),o.value?(u(),d("p",{key:0,class:p(["mt-2 text-sm",x.value==="error"?"text-red-600":"text-green-600"])},c(o.value),3)):b("",!0),t("div",J,[t("button",{type:"button",class:"hover:underline",onClick:e[8]||(e[8]=s=>l.$emit("navigate","login"))}," 이미 계정이 있으신가요? 로그인하기 ")])])])]))}});export{H as default};
