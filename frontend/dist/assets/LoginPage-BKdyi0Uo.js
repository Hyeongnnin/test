import{d as y,r as n,q as w,c as u,b as t,g as h,n as f,z as k,A as p,B as c,C,t as S,h as m}from"./index-DamHdx69.js";import{l as I}from"./api-DXNNeTpL.js";const _={class:"min-h-screen flex items-center justify-center bg-gray-50 pt-16"},V={class:"w-full max-w-md px-4"},j={class:"bg-white shadow-lg rounded-2xl border border-gray-100 p-8"},B={class:"flex mb-6 rounded-full border border-gray-200 bg-gray-50 p-1 text-sm"},M={class:"flex items-center justify-between text-xs text-gray-500"},$={class:"inline-flex items-center gap-2"},q=["disabled"],U={key:0},z={key:1},D={key:0,class:"mt-3 text-sm text-red-600"},L={class:"mt-6 border-t pt-4 text-sm text-gray-600"},E=y({__name:"LoginPage",emits:["navigate","logged-in"],setup(N,{emit:v}){const g=v,a=n("individual"),l=n(""),b=n(""),r=n(!1),d=n(!1),i=n("");if(w(r,o=>{typeof window>"u"||(o?window.localStorage.setItem("saved_username",l.value):window.localStorage.removeItem("saved_username"))}),typeof window<"u"){const o=window.localStorage.getItem("saved_username");o&&(l.value=o,r.value=!0)}async function x(){var o,e;d.value=!0,i.value="";try{const s=await I(l.value,b.value);try{window.localStorage.setItem("access",s.access),s.refresh&&window.localStorage.setItem("refresh",s.refresh)}catch{}g("logged-in",s.access),g("navigate","dashboard")}catch(s){i.value=((e=(o=s==null?void 0:s.response)==null?void 0:o.data)==null?void 0:e.detail)||"로그인에 실패했습니다. 아이디와 비밀번호를 다시 확인해주세요."}finally{d.value=!1}}return(o,e)=>(m(),u("div",_,[t("div",V,[t("div",j,[e[11]||(e[11]=t("h2",{class:"text-2xl font-semibold text-gray-900 mb-2"},"로그인",-1)),e[12]||(e[12]=t("p",{class:"text-sm text-gray-500 mb-6"}," 가입하신 아이디와 비밀번호를 입력해주세요. ",-1)),t("div",B,[t("button",{type:"button",class:f(["flex-1 py-2 rounded-full transition-colors",a.value==="individual"?"bg-white text-brand-600 shadow-sm":"text-gray-500"]),onClick:e[0]||(e[0]=s=>a.value="individual")}," 개인회원 ",2),t("button",{type:"button",class:f(["flex-1 py-2 rounded-full transition-colors",a.value==="expert"?"bg-white text-brand-600 shadow-sm":"text-gray-500"]),onClick:e[1]||(e[1]=s=>a.value="expert")}," 전문가 회원 ",2)]),t("form",{onSubmit:k(x,["prevent"]),class:"space-y-4"},[t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"아이디",-1)),p(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>l.value=s),type:"text",autocomplete:"username",required:"",class:"w-full px-3 py-2 rounded-lg border border-gray-300 text-sm focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-brand-500",placeholder:"아이디를 입력하세요"},null,512),[[c,l.value]])]),t("div",null,[e[7]||(e[7]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"비밀번호",-1)),p(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>b.value=s),type:"password",autocomplete:"current-password",required:"",class:"w-full px-3 py-2 rounded-lg border border-gray-300 text-sm focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-brand-500",placeholder:"비밀번호를 입력하세요"},null,512),[[c,b.value]])]),t("div",M,[t("label",$,[p(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>r.value=s),type:"checkbox",class:"rounded border-gray-300 text-brand-600 focus:ring-brand-500"},null,512),[[C,r.value]]),e[8]||(e[8]=t("span",null,"아이디 저장",-1))]),e[9]||(e[9]=t("button",{type:"button",class:"hover:underline"}," 아이디 / 비밀번호 찾기 ",-1))]),t("button",{type:"submit",class:"w-full inline-flex justify-center items-center px-4 py-2.5 rounded-lg bg-brand-600 text-white text-sm font-medium hover:bg-brand-700 disabled:opacity-60",disabled:d.value},[d.value?(m(),u("span",z,"로그인 중...")):(m(),u("span",U,"로그인"))],8,q)],32),i.value?(m(),u("p",D,S(i.value),1)):h("",!0),t("div",L,[e[10]||(e[10]=t("p",null,"아직 계정이 없으신가요?",-1)),t("button",{type:"button",class:"mt-2 w-full inline-flex justify-center items-center px-4 py-2 rounded-lg border border-gray-300 text-gray-800 hover:bg-gray-50",onClick:e[5]||(e[5]=s=>o.$emit("navigate","signup"))}," 회원가입 하러가기 ")])])])]))}});export{E as default};
